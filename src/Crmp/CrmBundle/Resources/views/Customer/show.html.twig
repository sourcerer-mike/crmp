{% extends '@Crm/Customer/base.html.twig' %}

{% block title %}{{ customer.name }}{% endblock %}

{% block related_nav %}
    {{ parent() }}
    <li>
        <a href="{{ path('customer_edit', { 'id': customer.id }) }}"
           title="{% trans %}Edit{% endtrans %}">
            <i class="fa fa-pencil"></i> {% trans %}Customer edit{% endtrans %}
        </a>
    </li>
    <li>
        <a href="{{ path('address_new', {customer: customer.id}) }}">
            <i class="fa fa-plus"></i>
            {% trans %}Address creation{% endtrans %}
        </a>
    </li>
    <li>
        <a href="{{ path('inquiry_new', {'id': customer.id}) }}">
            <i class="fa fa-plus"></i>
            {% trans %}Inquiry creation{% endtrans %}
        </a>
    </li>
    <li>
        <a href="{{ path('invoice_new', {'customer': customer.id}) }}">
            <i class="fa fa-plus"></i>
            {% trans %}Invoice creation{% endtrans %}
        </a>
    </li>
{% endblock %}

{% block breadcrumb %}
    {{ parent() }}
    <li class="active">
        {{ customer.name }}
    </li>
{% endblock %}

{% block body %}
    <h1>{{ customer.name }}</h1>

    <table class="table table-striped table-hover table-bordered">
        <tbody>
        <tr>
            <th>Id</th>
            <td>{{ customer.id }}</td>
        </tr>
        </tbody>
    </table>

    {% include 'CrmBundle::sub-list.html.twig' with {
        title: 'Inquiry list'|trans,
        template: 'AcquisitionBundle:Inquiry:_list.html.twig',
        target: customer.inquiries,
        subset: {inquiries: customer.inquiries[0:cfg_recent_amount] },
        add_link: path('inquiry_new', {'customer': customer.id}),
        add_label: 'Inquiry creation'|trans,
        more_link: path('inquiry_index', {'customer': customer.id}),
    } %}

    {% include 'CrmBundle::sub-list.html.twig' with {
    title: 'Address list'|trans,
    template: 'CrmBundle:Address:_list.html.twig',
    target: customer.addresses,
    subset: {addresses: customer.addresses[0:cfg_recent_amount] },
    add_link: path('address_new', {'customer': customer.id}),
    add_label: 'Address creation'|trans,
    more_link: path('address_index', {'customer': customer.id}),
    } %}

    {% include 'CrmBundle::sub-list.html.twig' with {
    title: 'Invoice list'|trans,
    template: 'CrmpAccBundle:Invoice:_list.html.twig',
    target: customer.invoices,
    subset: {invoices: customer.invoices[0:cfg_recent_amount] },
    add_link: path('invoice_new', {'customer': customer.id}),
    add_label: 'Invoice creation'|trans,
    more_link: path('invoice_index', {'customer': customer.id}),
    } %}
{% endblock %}
